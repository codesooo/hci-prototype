<!-- [성적문의] 시험지 확인 요청 관련 -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
</head>
<body>
    <div class="row question">
        <div class ="col">
            <div class="alert alert-primary" role="alert">
                확인하고자 하는 시험이 중간고사인지 기말고사인지 알려주세요.
            </div>
        </div>
        <div class="col"></div>
    </div>
    <div class="row answer">
        <div class ="col"></div>
        <div class="col">
            <div id="result" class="alert alert-secondary" role="alert" style="display: none;"></div>
        </div>
    </div>
    <div class="input-group mb-3" style="bottom: 0px; position: absolute;	width: 59rem;">
        <input id="moreDetailInput" type="text" class="form-control" placeholder="입력해주세요" aria-describedby="">
        
        <button onclick="printInput()" class="btn btn-outline-primary" type="button" id="df">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-send" viewBox="0 0 16 16">
                <path d="M15.854.146a.5.5 0 0 1 .11.54l-5.819 14.547a.75.75 0 0 1-1.329.124l-3.178-4.995L.643 7.184a.75.75 0 0 1 .124-1.33L15.314.037a.5.5 0 0 1 .54.11ZM6.636 10.07l2.761 4.338L14.13 2.576 6.636 10.07Zm6.787-8.201L1.591 6.602l4.339 2.76 7.494-7.493Z"/>
            </svg>
        </button>
    </div>
    <div class="text-center">
        <div class="spinner-border" role="status" id = 'spinner' style="display: none;">
            <span class="visually-hidden">Loading...</span>
        </div>
    </div>

    <div class="alert alert-info" role="alert" id='successinfo' style="display: none;">
        메일 생성을 위한 준비가 완료되었습니다!
    </div>
    <script>
        function printInput() {
            let str = document.getElementById('moreDetailInput').value;
            if (!str){
                alert("입력하세요");
            }
            else{
                document.getElementById('result').innerText = str;
                document.getElementById('result').style.display = 'block'; // 결과를 보이게 함
                document.getElementById('moreDetailInput').value = '';

                document.getElementById('spinner').style.display = 'block';
                setTimeout(function () {
                    document.getElementById('spinner').style.display = 'none';
                    document.getElementById('successinfo').style.display = 'block';

                }, 1500);

                var examInfo = str;
                var mailSubject = "시험 관련 문의" + "| " + major + " " + studentId + " " + name + " 입니다.";

                if (tone === '정중한') {
                mailresult = "- " + recipientName + " 교수님께. \n\n안녕하세요, " + recipientName + " 교수님.\n\n";
                mailresult += "저는 " + lecture + "을(를) 수강하고 있는 " + major + " " + studentId + " " + name + " 입니다.\n";
                mailresult += "이번 학기 " + examInfo + " 성적이 제가 예상한 것보다 낮아서 어떤 부분에서 부족했는지 알고 싶어서 연락 드립니다.\n";
                mailresult += examInfo + " 시험지를 확인하게 해주신다면 앞으로 부족한 부분을 보완하여 공부하도록 하겠습니다.\n";
                mailresult += "\n바쁘신 와중에 메일 읽어주셔서 감사합니다. \n날이 추운데 감기 조심하시기 바랍니다.\n\n";
                }
                else if (tone === '친근한') {
                    mailresult = "- " + recipientName + " 교수님께. \n\n교수님, 안녕하세요!\n\n";
                    mailresult += lecture + "을(를) 수강 중인 " + major + " " + studentId + " " + name + " 입니다.\n";
                    mailresult += "이번 학기 " + examInfo + " 성적이 제가 예상한 것보다 낮아서 어떤 부분에서 부족했는지 알고 싶어서 연락 드리게 되었어요!\n";
                    mailresult += examInfo + " 시험지를 확인하게 해주신다면 앞으로 부족한 부분을 보완하여 열심히 공부하겠습니다 :)\n";
                    mailresult += "\n바쁘신 와중에 메일 읽어주셔서 감사합니다!\n날이 추운데 감기 조심하시고 좋은 하루 보내세요 :)\n\n";
                }
                mailresult += "- " + name + " 드림."; 
            }
            function typeWriter(textarea, content, index) {
                if (index < content.length) {
                    textarea.value += content.charAt(index);
                    index++;
                    setTimeout(function () {
                    typeWriter(textarea, content, index);
                    }, 10); // 10밀리초마다 한 글자씩 추가
                        }
                        } 

                mailSubjectTextarea = document.getElementById('mailSubject');
                mailContentTextarea = document.getElementById('mailContent');

                mailSubjectTextarea.value = mailSubject;
                mailContentTextarea.value = '';
                // 문자열을 한 글자씩 나타내는 타이핑 효과 함수 호출
                typeWriter(mailContentTextarea, mailresult, 0);
        }
    </script>
</body>
</html>
